<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santo Laser | Master Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav>
        <div class="logo-area">SANTO LASER</div>
        <a class="nav-link active" data-target="dashboard-content"><i class="fa-solid fa-chart-pie"></i>DASHBOARD</a>
        <a class="nav-link" data-target="calculator-content"><i class="fa-solid fa-calculator"></i>CALCULADORA OS</a>
        <a class="nav-link" data-target="crm-content"><i class="fa-solid fa-users"></i>CRM CLIENTES</a>
        <a class="nav-link" data-target="simulator-content"><i class="fa-solid fa-chart-line"></i>SIMULADOR</a>
        <a class="nav-link" data-target="stock-content"><i class="fa-solid fa-boxes-stacked"></i>ESTOQUE</a>
        
        <a class="nav-link theme-switcher" id="theme-toggle-btn">
            <i class="fa-solid fa-sun"></i>
            <i class="fa-solid fa-moon"></i>
            <span>ALTERAR TEMA</span>
        </a>
    </nav>

    <main>
        <!-- ======================= DASHBOARD ======================= -->
        <div id="dashboard-content" class="content-section active">
            <div class="welcome-msg">
                <p id="current-date">Data</p>
                <h2>BEM-VINDO AO COMANDO, SANTO LASER</h2>
            </div>
            <div class="kpi-grid">
                <div class="kpi-card"><small>Faturamento Mensal</small><span class="value">R$ 12.450</span></div>
                <div class="kpi-card"><small>Lucro Estimado</small><span class="value">R$ 4.200</span></div>
                <div class="kpi-card"><small>Pedidos Ativos</small><span class="value">18</span></div>
                <div class="kpi-card"><small>Margem M√©dia</small><span class="value">38%</span></div>
            </div>
            <div class="goal-container">
                <div class="goal-header"><span>PROGRESSO DA META MENSAL</span><span>65% CONCLU√çDO</span></div>
                <div class="progress-bg"><div class="progress-fill"></div></div>
            </div>
            <div class="bottom-grid">
                <div class="info-box"><h3>√öLTIMAS ATIVIDADES</h3></div>
                <div class="info-box"><h3>SA√öDE OPERACIONAL</h3></div>
            </div>
        </div>

        <!-- ======================= CALCULATOR ======================= -->
        <div id="calculator-content" class="content-section">
            <div class="grid-master">
                <div class="sidebar">
                    <h2 style="font-family: var(--font-accent); font-size: 1.2rem; margin-top: 0;">Painel de Or√ßamento</h2>
                    <div class="section-header">üë§ Dados da Proposta</div>
                    <div class="field-grid">
                        <div class="field"><label>Nome do Cliente</label><input type="text" id="g_cliente" placeholder="Ex: Jo√£o Silva" oninput="calc()"></div>
                        <div class="field"><label>Data da Proposta</label><input type="date" id="g_data_proposta" oninput="calc()"></div>
                    </div>
                    <div class="section-header">üì¶ Itens do Pedido</div>
                    <div id="items-list"></div>
                    <button class="btn-add" onclick="addItem()">+ ADICIONAR NOVO ITEM</button>
                    <div class="section-header">‚öñÔ∏è Taxas e Impostos (%)</div>
                    <div class="field-grid">
                        <div class="field"><label>Imposto (NF/MEI)</label><div class="input-wrapper"><input type="number" id="g_imp" value="6" oninput="calc()" class="has-suffix"><span class="suffix">%</span></div></div>
                        <div class="field"><label>Risco Operacional</label><div class="input-wrapper"><input type="number" id="g_risco" value="10" oninput="calc()" class="has-suffix"><span class="suffix">%</span></div></div>
                    </div>
                    <div class="section-header">üõ†Ô∏è Custos Operacionais</div>
                    <div class="field-grid">
                        <div class="field"><label>Valor da Hora (R$)</label><div class="input-wrapper"><span class="prefix">R$</span><input type="number" id="g_hora" value="120" oninput="calc()" class="has-prefix"></div></div>
                        <div class="field"><label>Taxa Cart√£o AM %</label><div class="input-wrapper"><input type="number" id="g_cartao" value="1" oninput="calc()" class="has-suffix"><span class="suffix">%</span></div></div>
                    </div>
                    <div class="field"><label>Custo Operacional / Insumos</label><div class="input-wrapper"><span class="prefix">R$</span><input type="number" id="g_frete" value="0" oninput="calc()" class="has-prefix"></div></div>
                    <div class="section-header">üöö Log√≠stica e Fidelidade</div>
                    <div class="field-grid">
                        <div class="field"><label>Frete p/ Cliente (R$)</label><div class="input-wrapper"><span class="prefix">R$</span><input type="number" id="g_frete_cliente" value="0" oninput="calc()" class="has-prefix"></div></div>
                        <div class="field"><label>Desconto (%)</label><div class="input-wrapper"><input type="number" id="g_desconto" value="0" oninput="calc()" class="has-suffix"><span class="suffix">%</span></div></div>
                    </div>
                    <div class="section-header">üí≥ Pagamento e Parcelas</div>
                    <div class="field-grid">
                        <div class="field"><label>Entrada (R$)</label><div class="input-wrapper"><span class="prefix">R$</span><input type="number" id="g_ent" value="0" oninput="calc()" class="has-prefix"></div></div>
                        <div class="field"><label>N¬∫ Parcelas</label><input type="number" id="g_parc" value="3" oninput="calc()"></div>
                    </div>
                    <div class="section-header">üìä Resumo Interno (Consolidado)</div>
                    <div class="internal-metrics">
                        <div class="metric-line"><span>Tempo Total Produ√ß√£o:</span> <b id="out_tempo_total">0h 00m</b></div>
                        <div class="metric-line"><span>Custo Total Geral:</span> <b id="out_custo_total">R$ 0,00</b></div>
                        <div class="metric-line"><span>Lucro Real Estimado:</span> <b id="out_lucro_total" style="color:var(--success)">R$ 0,00</b></div>
                    </div>
                </div>
                <div class="preview-side">
                    <div class="card-venda" id="printable-card">
                        <div class="brand-logo">SANTO LASER</div>
                        <div class="client-info-display" id="display_cliente_box" style="display: none;">
                            <div class="client-label">Cliente</div><div class="client-value" id="display_nome_cliente">-</div>
                            <div class="client-label" style="margin-top: 10px;">Data da Proposta</div><div class="client-value" id="display_data_proposta">-</div>
                        </div>
                        <table class="items-table">
                            <thead><tr><th class="qty-col">QTD</th><th>ITEM</th><th style="text-align:right">PRE√áO</th></tr></thead>
                            <tbody id="card-body"></tbody>
                        </table>
                        <div class="total-box"><small style="color:var(--neon); letter-spacing:2px; font-weight: bold;">VALOR TOTAL</small><div class="total-val" id="card_total">R$ 0,00</div></div>
                        <div id="payment-details"></div>
                        <div style="font-size:0.85rem; margin-top:20px;">Fale conosco: <a href="https://wa.me/5548996728584" class="wa-link">48 99672-8584</a></div>
                        <div style="font-size:0.65rem; color:var(--text-secondary); margin-top:10px; font-weight: bold; letter-spacing: 1px;">SANTO LASER - CNPJ: 64.544.332/0001-10</div>
                    </div>
                    <button class="btn-action" onclick="copyWA()">COPIAR PARA WHATSAPP</button>
                    <button class="btn-action" style="background: var(--success); margin-top: 10px;" onclick="sendToCRM()">SALVAR NO CRM & NOTION</button>
                    <button class="btn-pdf" onclick="window.print()">BAIXAR PROPOSTA EM PDF</button>
                </div>
            </div>
        </div>

        <!-- ======================= CRM ======================= -->
        <div id="crm-content" class="content-section">
            <div class="crm-header">
                <h2>CRM - GEST√ÉO DE OPORTUNIDADES</h2>
                <div class="crm-controls">
                    <button class="btn-action" onclick="openNewLeadModal()">+ NOVO CLIENTE</button>
                    <button class="btn-pdf" onclick="toggleCRMView()">ALTERNAR VIS√ÉO (KANBAN/TABELA)</button>
                </div>
            </div>

            <div id="kanban-view" class="kanban-container">
                <div class="kanban-column" data-status="Proposta Enviada">
                    <div class="column-header">PROPOSTA ENVIADA <span class="count">0</span></div>
                    <div class="kanban-cards"></div>
                </div>
                <div class="kanban-column" data-status="Aprovado">
                    <div class="column-header">APROVADO <span class="count">0</span></div>
                    <div class="kanban-cards"></div>
                </div>
                <div class="kanban-column" data-status="Produ√ß√£o">
                    <div class="column-header">PRODU√á√ÉO <span class="count">0</span></div>
                    <div class="kanban-cards"></div>
                </div>
                <div class="kanban-column" data-status="Finalizado">
                    <div class="column-header">FINALIZADO <span class="count">0</span></div>
                    <div class="kanban-cards"></div>
                </div>
                <div class="kanban-column" data-status="Pago">
                    <div class="column-header">PAGO <span class="count">0</span></div>
                    <div class="kanban-cards"></div>
                </div>
            </div>

            <div id="table-view" class="table-container" style="display: none;">
                <table class="crm-table">
                    <thead>
                        <tr>
                            <th>CLIENTE</th>
                            <th>EMPRESA</th>
                            <th>STATUS</th>
                            <th>VALOR</th>
                            <th>ENTREGA</th>
                            <th>TIPO</th>
                            <th>A√á√ïES</th>
                        </tr>
                    </thead>
                    <tbody id="crm-table-body"></tbody>
                </table>
            </div>
        </div>

        <!-- ======================= SIMULADOR FINANCEIRO (FLUXO DE CAIXA) ======================= -->
        <div id="simulator-content" class="content-section">
            <div class="crm-header">
                <h2>SIMULADOR FINANCEIRO & FLUXO DE CAIXA</h2>
                <div class="crm-controls">
                    <button class="btn-action" style="background: var(--success);" onclick="openTransactionModal('entrada')">+ ENTRADA</button>
                    <button class="btn-action" style="background: var(--danger);" onclick="openTransactionModal('saida')">+ SA√çDA</button>
                </div>
            </div>

            <div class="kpi-grid">
                <div class="kpi-card"><small>Saldo Atual</small><span class="value" id="cash-balance">R$ 0,00</span></div>
                <div class="kpi-card"><small>Entradas (M√™s)</small><span class="value" style="color:var(--success)" id="cash-inflow">R$ 0,00</span></div>
                <div class="kpi-card"><small>Sa√≠das (M√™s)</small><span class="value" style="color:var(--danger)" id="cash-outflow">R$ 0,00</span></div>
                <div class="kpi-card"><small>Resultado do Per√≠odo</small><span class="value" id="cash-result">R$ 0,00</span></div>
            </div>

            <div class="table-container">
                <table class="crm-table">
                    <thead>
                        <tr>
                            <th>DATA</th>
                            <th>DESCRI√á√ÉO</th>
                            <th>CATEGORIA</th>
                            <th>M√âTODO</th>
                            <th>VALOR</th>
                            <th>A√á√ïES</th>
                        </tr>
                    </thead>
                    <tbody id="finance-table-body"></tbody>
                </table>
            </div>
        </div>

        <!-- ======================= MODAL FINANCEIRO ======================= -->
        <div id="finance-modal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="finance-modal-title">ADICIONAR TRANSA√á√ÉO</h3>
                    <span class="close-modal" onclick="closeFinanceModal()">&times;</span>
                </div>
                <div class="sidebar" style="width: 100%; box-shadow: none; background: transparent; padding: 0;">
                    <div class="field-grid">
                        <div class="field"><label>Descri√ß√£o</label><input type="text" id="f_desc" placeholder="Ex: Compra de Acr√≠lico"></div>
                        <div class="field"><label>Valor (R$)</label><input type="number" id="f_valor" placeholder="0.00"></div>
                    </div>
                    <div class="field-grid">
                        <div class="field">
                            <label>M√©todo</label>
                            <select id="f_metodo" style="background: var(--bg-input); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px; font-family: var(--font-primary);">
                                <option value="PIX">PIX</option>
                                <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                                <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
                                <option value="Esp√©cie">Esp√©cie</option>
                                <option value="Cripto">Cripto</option>
                            </select>
                        </div>
                        <div class="field"><label>Data</label><input type="date" id="f_data"></div>
                    </div>
                    <input type="hidden" id="f_tipo">
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn-action" onclick="saveTransaction()">SALVAR TRANSA√á√ÉO</button>
                        <button class="btn-pdf" onclick="closeFinanceModal()" style="background: var(--danger); color: white;">CANCELAR</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="stock-content" class="content-section"><h2>Estoque</h2><p>Em constru√ß√£o...</p></div>
    </main>

    <script src="script.js"></script>
</body>
</html>

    <!-- ======================= MODAL LEAD ======================= -->
    <div id="lead-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">NOVO CLIENTE / LEAD</h3>
                <span class="close-modal" onclick="closeLeadModal()">&times;</span>
            </div>
            <div class="sidebar" style="width: 100%; box-shadow: none; background: transparent; padding: 0;">
                <div class="section-header">üë§ Informa√ß√µes B√°sicas</div>
                <div class="field-grid">
                    <div class="field"><label>Nome do Cliente *</label><input type="text" id="m_cliente" placeholder="Nome Completo"></div>
                    <div class="field"><label>Empresa</label><input type="text" id="m_empresa" placeholder="Raz√£o Social / Fantasia"></div>
                </div>
                <div class="field-grid">
                    <div class="field">
                        <label>Status</label>
                        <select id="m_status" style="background: var(--bg-input); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px; font-family: var(--font-primary);">
                            <option value="Proposta Enviada">Proposta Enviada</option>
                            <option value="Aprovado">Aprovado</option>
                            <option value="Produ√ß√£o">Produ√ß√£o</option>
                            <option value="Finalizado">Finalizado</option>
                            <option value="Pago">Pago</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Origem</label>
                        <select id="m_origem" style="background: var(--bg-input); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px; font-family: var(--font-primary);">
                            <option value="WhatsApp">WhatsApp</option>
                            <option value="Instagram">Instagram</option>
                            <option value="Indica√ß√£o">Indica√ß√£o</option>
                            <option value="Site">Site</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                </div>
                <div class="section-header">üì¶ Detalhes do Trabalho</div>
                <div class="field-grid">
                    <div class="field">
                        <label>Tipo</label>
                        <select id="m_tipo" style="background: var(--bg-input); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px; font-family: var(--font-primary);">
                            <option value="Produto">Produto</option>
                            <option value="Servi√ßo">Servi√ßo</option>
                        </select>
                    </div>
                    <div class="field"><label>Data de Entrega</label><input type="date" id="m_entrega"></div>
                </div>
                <div class="section-header">üí∞ Valores (Opcional)</div>
                <div class="field-grid">
                    <div class="field"><label>Valor Total (R$)</label><input type="number" id="m_valor" placeholder="0.00"></div>
                    <div class="field"><label>Lucro Real (R$)</label><input type="number" id="m_lucro" placeholder="0.00"></div>
                </div>
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="btn-action" onclick="saveLead()">SALVAR NO CRM & NOTION</button>
                    <button class="btn-pdf" onclick="closeLeadModal()" style="background: var(--danger); color: white;">CANCELAR</button>
                </div>
            </div>
        </div>
    </div>
